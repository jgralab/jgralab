<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<title>TGraphBrowser</title>
<meta http-equiv="Content-Script-Type" content="text/javascript" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<style type="text/css">
* {
	margin: 0;
	padding: 0;
	z-index: 1;
}

/**************
 * background *
 **************/

body {
	color: black;
	background-color: white;
	font-family: Helvetica, Arial, sans-serif;
}

/**************
 *     top    *
 **************/

div#top {
	height: 3em;
	background-color: #84e33d;
	white-space: nowrap;
}

div#top .option{
	display: inline;
	position: relative;
	top: -20px;
}

div#top p{
	display: inline;
}

div#top a {
	position: relative;
	padding: 0.2em;
	text-decoration: none;
	text-align: center;
	font-weight: bold;
	font-size: small;
	border: 1px solid black;
	border-left-color: white;
	border-top-color: white;
	color: black;
	background-color: #ccc;
}

div#top a:hover {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #aaa;
}

div#top a.geklickt {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #777;
}

img.jGraLab{
	display: inline;
	margin-left: 3px;
	margin-top : 3px;
	height: 2.5em;
}

div#top select#selectGraph{
	width: 15em;
	margin-right: 50px;
}

div#top div#rightOption{
	margin-left: 50px;
}

div#top input#textPathLength{
	width: 3em;
}

/**************
 * load bar   *
 **************/
 
div#divLoadBar{
	display: block; 
	text-align: center; 
	z-index: 10;
}

div#divLoadBar div#loadBar{
	position: relative; 
	text-align: left; 
	width: 400px;
}

div#loadBarBackground{
	width: 400px;
	height: 20px;
	background-color: silver;
	border: solid 1px black;
	text-align: left; 
}

div#loadBarForeground{
	height: 20px;
	width: 0px;
	background-color: green;
}

span#loadBarNumber{
	position: relative;
	right: -190px;
	white-space: nowrap;
	color: white;
}	

/****************
 * file upload  *
 ****************/

div#divFileUpload{
	 text-align: center; 
	 z-index: 10;
	 background-color: white;
	 min-width: 79em;
	 min-height: 37em;
}		

/***************
 * uri upload  *
 ***************/

div#divURI{
	 text-align: center; 
	 z-index: 10;
	 background-color: white;
	 min-width: 79em;
	 min-height: 37em;
}			

/******************
 * filter window  *
 ******************/	
					
div#divFilterWindow {
	width: 20em;
	float: left;
	background-color: #84e33d;
	text-align: center;
	padding-left: 0.3em;
	padding-right: 0.3em;
}

div#divFilterWindow div input{
	margin-left: 0.2em;
	margin-right: 0.2em;
}

div#divFilterWindow a {
	position: relative;
	top: 0.5em;
	margin-top: 0.5em;
	padding: 0.2em;
	text-decoration: none;
	text-align: center;
	font-weight: bold;
	font-size: small;
	border: 1px solid black;
	border-left-color: white;
	border-top-color: white;
	color: black;
	background-color: #ccc;
}

div#divFilterWindow a:hover {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #aaa;
}

div#divFilterWindow a.geklickt {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #777;
}

div#divFilterWindow .visible{
	display: block;
	margin-top: 1em;
	text-align: left;
	white-space: nowrap;
	background-color: white;
	border: thin inset;
	padding: 0.5em;
	width: 18em;
	overflow: auto;
	height: 22em;
}

div#divFilterWindow .hidden{
	display: none;
}

/* format of the hierachical view */

div#divFilterWindow ul{
	list-style: none;
}

div#divFilterWindow ul li{
	margin-top: 0.2em;
}

div#divFilterWindow ul ul{
	margin-left: 2em;
	display: none;
}

div#divFilterWindow ul a{
	position: static;
	top: 0em;
	padding: 0;
	margin: 0;
	margin-right: 0.1em;
	border: 0;
	background-color: white;
}

div#divFilterWindow ul a:hover{
	position: static;
	top: 0em;
	padding: 0;
	margin: 0;
	margin-right: 0.1em;
	border: 0;
	background-color: white;
}

div#divFilterWindow ul img{
	top: 0em;
	padding: 0;
	margin: 0;
	width: 1em;
	height: 1em;
	margin-right: 0.2em;
}

div#divFilterWindow ul a img{
	border: 1px solid black;
}

div#divFilterWindow ul a img:hover{
	border: 1px solid silver;
}

div#divFilterWindow ul p{
	display: inline;
}

/******************
 * right          *
 ******************/

div#divRight{
	margin-left: 20.6em;
}

/******************
 * GReQL query    *
 ******************/

div#divGReQLWindow{
	display: none;
	position: absolute;
	left: 20.6em;
	padding: 1em;
	border: groove 2px;
	text-align: center;
	background-color: menu;
	z-index: 3;
}

div#divGReQLWindow div{
	display: inline-block;
}

div#divGReQLWindow textarea{
	margin: 0;
	padding: 0;
}

div#divGReQLWindow a {
	position: relative;
	top: 0.5em;
	padding: 0.2em;
	text-decoration: none;
	text-align: center;
	font-weight: bold;
	font-size: small;
	border: 1px solid black;
	border-left-color: white;
	border-top-color: white;
	color: black;
	background-color: #ccc;
}

div#divGReQLWindow a:hover {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #aaa;
}

div#divGReQLWindow a.geklickt {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #777;
}

/******************
 * breadcrumbbar  *
 ******************/

div#divBreadcrumbBar{
	background-color: #791e1e;
	white-space: nowrap;
}

div#divBreadcrumbBar p{
	margin-left: 0.5em;
	margin-right: 0.5em;
	font-family: monospace;
	font-size: 1.5em;
	font-weight: bolder;
	letter-spacing: -2px;
	color: silver;
}

div#divBreadcrumbBar a{
	margin-left: 0.5em;
	margin-right: 0.5em;
	font-size: medium;
	font-weight: normal;
	font-family: Helvetica, Arial, sans-serif;
	letter-spacing: 0em;
	color: white;
}

/******************
 * table view     *
 ******************/

div#divTextGraph{
	padding-top: 15px;
	text-align: center;
}

div#divTextGraph div#divTextVertex{
	overflow: auto;
}

div#divTextGraph div#divTextEdge{
	overflow: auto;
}

div#divTextGraph div.divHeadline a {
	padding: 0.2em;
	text-decoration: none;
	text-align: center;
	font-weight: bold;
	font-size: small;
	border: 1px solid black;
	border-left-color: white;
	border-top-color: white;
	color: black;
	background-color: #ccc;
}

div#divTextGraph div.divHeadline a:hover {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #aaa;
}

div#divTextGraph div.divHeadline a.geklickt {
	border-color: white;
	border-left-color: black;
	border-top-color: black;
	color: white;
	background-color: #777;
}

div#divTextGraph table{
	margin-left: auto;
	margin-right: auto;
	border-collapse:collapse;
}

div#divTextGraph table th{
	border: 1px solid black;
	padding: 0.5em;
}

div#divTextGraph table td{
	border: 1px solid black;
	padding: 0.5em;
	vertical-align: text-top;
}

div#divTextGraph table a{
	text-decoration: none;
}

/******************
 * graphical view *
 ******************/

div#div2DGraph{
	overflow: auto;
}

</style>
<script type="text/javascript">
	/* <![CDATA[ */
	
	/*
	 * ######################################################
	 * ####           Global variables                   ####
	 * ######################################################
	 */
	
	// the id of this session
	var sessionId;

	// the last access to the state at the server
	var timestamp;

	// saves the id of the currently shown vertex
	var currentVertex;

	// saves the id of the currently shown edge
	var currentEdge;
	
	// the element which was clicked at last
	var currentElement;
	
	// first the whole page must be loaded completely
	var isLoaded = false;

	// xml-http-request object
	var http;

	// timout for the AJAX-Request
	var timeoutId;

	// the index of SELECT of the shown graph 
	var selectedGraphIndex;

	// id of timeout for loading
	var id;

	/*
	 * ######################################################
	 * ####           Init function                   ####
	 * ######################################################
	 */

	/*
	 * Called when html-Page is completely loaded.
	 * Sets isLoaded=true.
	 */
	function init(){
		sessionId /*?*/;
		id = null;
		sendPostRequest("initializeBrowser",null,true);
		window.onresize = resize;
		resize();
		isLoaded = true;
	}

	/*
	 * ######################################################
	 * ####                     AJAX                     ####
	 * ######################################################
	 */

	/*
	 * Sends a AJAX-Post-Request to the Webserver.
	 * The request consists of:
	 * timestamp
     * sessionId
     * method
     * params
     *
	 * The response is evaluated in evaluateResponse.
	 *
	 * @param method the method name of Java
	 * @param the correct formatted params (each in an extra line)
	 * @param timeout if true there is a timout after 60 sec.
	 */
	function sendPostRequest(method, params, timeout){
		if(id==null){
			http=new XMLHttpRequest();
			http.open("POST", " ", true);
			http.onreadystatechange = evaluateResponse;
			http.setRequestHeader("Content-Type","text/plain");
		    var content = timestamp+"\n"+sessionId+"\n"+method+(params!=null?"\n"+params:"");
			http.send(content);
			if(timeout){
				document.getElementsByTagName("body")[0].style.cursor = "wait";
				id = window.setTimeout("cancel()", 60000);
				// disable all elements
				var inputs = document.getElementsByTagName("input");
				for(var i=0; i<inputs.length; i++){
					inputs[i].disabled = true;
				}
				var selects = document.getElementsByTagName("select");
				for(var i=0; i<selects.length; i++){
					selects[i].disabled = true;
				}
			}else{
				id = null;
			}
		}
	}

	/*
	 * Evaluates the response.
	 */
	function evaluateResponse() {
		if (http.readyState == 4) {
			document.getElementsByTagName("body")[0].style.cursor = "auto";
			if(id!=null){
				// delete Timeout
				window.clearTimeout(id);
				// enable all elements
				var inputs = document.getElementsByTagName("input");
				for(var i=0; i<inputs.length; i++){
					inputs[i].disabled = false;
				}
				var selects = document.getElementsByTagName("select");
				for(var i=0; i<selects.length; i++){
					selects[i].disabled = false;
				}
				id = null;
			}
			// evaluate result
			var response = eval("("+http.responseText+")");
			response.method();
		}	
	}

	/*
	 * If the server didnt'a answer during 60 sec, the user
	 * is asked if he wants to wait further 60 sec. If not
	 * the connection is aborted.
	 */
	function cancel(){
		if(window.confirm("The server didn't answer during 60 sec. Do you want to wait further 60 sec?")){
			id = window.setTimeout("cancel()", 60000);
		}else{
			http.abort();
			document.getElementById('divError').style.display = "block";
			document.getElementById('h2ErrorMessage').innerHTML = 
				'ERROR: The connection to the server was closed.';
			document.getElementById('divNonError').style.display = "none";
		}
	}

	/*
	 * ######################################################
	 * ####           Design functions                   ####
	 * ######################################################
	 */
	var oldWidth = 0;
	var oldHeight = 0;

	/*
	 * Resizes the elements to the size of the window.
	 */
	function resize(){
		var width = document.documentElement.clientWidth-1;
		var height = document.documentElement.clientHeight-1;
		if (width<1100){
			width = 1100;
		}
		if (height<590){
			height = 590;
		}
		var intendLeft = document.getElementById("divFilterWindow").offsetWidth;
		var intendTop = document.getElementById("top").offsetHeight;
		document.body.style.width = width + "px";
		document.body.style.height = height + "px";
		document.getElementById("top").style.width = width + "px";
		document.getElementById("loadBar").style.left = (width/2-200) + "px";
		document.getElementById("divFilterWindow").style.height = (height - intendTop) + "px";
		document.getElementById("divRight").style.width = (width - intendLeft) + "px";
		document.getElementById("divRight").style.height = (height - intendTop) + "px";
		var textGraphHeight = document.getElementById("divBreadcrumbBar").offsetHeight;
		if (document.getElementById("divHeadline")!=null){
			textGraphHeight += document.getElementById("divHeadline").offsetHeight;
			textGraphHeight += document.getElementById("hrHeadline").offsetHeight;
			textGraphHeight += 15; // 15 px padding-top of divTextGraph
			textGraphHeight += 8; // 8 px margin-bottom of divHeadline
		}
		var vertexDiv = document.getElementById("divTextVertex");
		if(vertexDiv!=null){
			vertexDiv.style.height = (height - intendTop - textGraphHeight) + "px";
			vertexDiv.style.width = (width - intendLeft) + "px";
		}
		var edgeDiv = document.getElementById("divTextEdge");
		if(edgeDiv!=null){
			edgeDiv.style.height = (height - intendTop - textGraphHeight) + "px";
			edgeDiv.style.width = (width - intendLeft) + "px";
		}
		var div2dHeight = (height - intendTop - document.getElementById("divBreadcrumbBar").offsetHeight);
		document.getElementById("div2DGraph").style.height = div2dHeight + "px";
		var embed2dGraph=document.getElementById("embed2DGraph");
		if(embed2dGraph!=null){
			var embedHeight = div2dHeight - 4;
			var embedWidth = (width - intendLeft) - 4;
			embed2dGraph.style.height = embedHeight + "px";
			embed2dGraph.style.width = embedWidth + "px";
			var svgdoc = embed2dGraph.getSVGDocument();
			if(!svgdoc){
				svgdoc = embed2dGraph.contentDocument;
			}
			if(svgdoc){
				var navdoc = svgdoc.getElementById("nav");
		        navdoc.setAttributeNS(null,"height",embedHeight - navdoc.getAttribute("y") - 2);
		        navdoc.setAttributeNS(null,"width",embedWidth - navdoc.getAttribute("x") - 2);
		        var rect = svgdoc.getElementById("rect");
		        rect.setAttributeNS(null,"height",embedHeight - rect.getAttribute("y"));
		        rect.setAttributeNS(null,"width",embedWidth - rect.getAttribute("x"));
			}
		}
	}
	 
	/*
	 * Markes the clicked link as clicked.
	 *
	 * @param the id of the link.
	 */
	function markAsClicked(id){
		var link = document.getElementById(id);
		if(link.hasAttribute){
			link.setAttribute("class","geklickt");
		}else{
			// code for Internet Explorer 7
			link.setAttribute("className","geklickt");
		}
	}

	/*
	 * Removed the mark of the clicked link as clicked.
	 *
	 * @param the id of the link.
	 */
	function demarkAsClicked(id){
		var link = document.getElementById(id);
		if(link.hasAttribute){
			link.setAttribute("class","");
		}else{
			// code for Internet Explorer 7
			link.setAttribute("className","");
		}
	}

	/*
	 * ######################################################
	 * ####           Functions called from HTML         ####
	 * ######################################################
	 */

	/*
	 * Called by onclick of Change View.
	 * Changes the options and the view.
	 */
	function changeView(){
		if(isLoaded){
			clearDisplay();
			var divTextVis = document.getElementById("divTextVis");
			var div2DVis = document.getElementById("div2DVis");
			var divTextGraph = document.getElementById("divTextGraph");
			var div2DGraph = document.getElementById("div2DGraph");
			var aChangeView = document.getElementById("aChangeView");
			var isTableViewShown;
			if(divTextVis.style.display == "inline" || divTextVis.style.display == ""){
				// show 2D graph
				isTableViewShown = false;
				divTextVis.style.display = "none";
				div2DVis.style.display = "inline";
				divTextGraph.style.display = "none";
				div2DGraph.style.display = "block";
				aChangeView.innerHTML = String.fromCharCode(160) + "Show tabular view" + String.fromCharCode(160);
			}else{
				// show table graph
				isTableViewShown = true;
				divTextVis.style.display = "inline";
				div2DVis.style.display = "none";
				divTextGraph.style.display = "block";
				div2DGraph.style.display = "none";
				div2DGraph.innerHTML = "";
				aChangeView.innerHTML = String.fromCharCode(160) + "Show graphical view" + String.fromCharCode(160);
			}
			sendPostRequest("changeView",isTableViewShown + "\n" + isShowAttributesSet()+ "\n" + getSelectedNumbersPerPage() + "\n" + getPathLength() + "\n" + extractCurrentElement(), true);
		}
	}

	/*
	 * Marks GReQL-link as clicked.
	 * Displayes the GReQL-Window.
	 *
	 */
	function callGReQLWindow(){
		if(isLoaded){
			document.getElementById("h3GReQLError").innerHTML = "";
			if(document.getElementById("divGReQLWindow").style.display == "none"){
				markAsClicked("aGReQL");
				document.getElementById("divGReQLWindow").style.display = "block";
				// hide svg
				var embed2DGraph = document.getElementById("embed2DGraph");
				if(embed2DGraph != null){
					embed2DGraph.style.display = "none";
				}
			}else{
				clearDisplay();
			}
		}
	}

	/*
	 * Closes the GReQL-window and deletes the content of the textarea.
	 * Demarks the GReQL-Link.
	 *
	 */
	function cancelGReQL(){
		document.getElementById("divGReQLWindow").style.display="none";
		document.getElementById("textareaGreqlQuery").value="";
		demarkAsClicked("aGReQL");
		// show svg
		var embed2DGraph = document.getElementById("embed2DGraph");
		if(embed2DGraph != null){
			embed2DGraph.style.display = "block";
		}
	}
	
	/*
	 * Submits the GReQL-query
	 */
	function submitGReQL(){
		var textarea = document.getElementById("textareaGreqlQuery");
		if(textarea.value != ""){
			var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
			sendPostRequest("computeGReQLQuery", isTableViewShown + "\n" + isShowAttributesSet()+ "\n" + getSelectedNumbersPerPage() + "\n" + getPathLength() + "\n" + textarea.value.replace(/\r/g,"").replace(/\n/g," "), true);
		}else{
			document.getElementById("h3GReQLError").innerHTML = "Please insert a query.";
		}
	}

	/*
	 * Shows the vertex classes and marks the aVertex as clicked,
	 * if aVertex was clicked. Otherwise it shows the edge classes
	 * and marks the ohter link as clicked. The work for the packages
	 * is analogic.
	 *
	 * @param div the div which should become visible
	 * @param a the link which was clicked
	 */
	function changeFilterView(divName, a){
		var div = document.getElementById(divName);
		var link = document.getElementById(a);
		var otherdiv;
		var otherlink;
		var anotherdiv;
		var anotherlink;
		if(divName=='divVertexClass'){
			otherdiv = document.getElementById("divEdgeClass");
			otherlink = document.getElementById("aEdge");
			anotherdiv = document.getElementById("divPackage");
			anotherlink = document.getElementById("aPackage");
		}else if(divName=='divEdgeClass'){
			otherdiv = document.getElementById("divVertexClass");
			otherlink = document.getElementById("aVertex");
			anotherdiv = document.getElementById("divPackage");
			anotherlink = document.getElementById("aPackage");
		}else{
			otherdiv = document.getElementById("divEdgeClass");
			otherlink = document.getElementById("aEdge");
			anotherdiv = document.getElementById("divVertexClass");
			anotherlink = document.getElementById("aVertex");
		}
		if(link.hasAttribute){
			div.setAttribute("class","visible");
			otherdiv.setAttribute("class","hidden");
			anotherdiv.setAttribute("class","hidden");
			link.setAttribute("class","geklickt");
			otherlink.setAttribute("class","");
			anotherlink.setAttribute("class","");
		}else{
			// code for Internet Explorer 7
			div.setAttribute("className","visible");
			otherdiv.setAttribute("className","hidden");
			anotherdiv.setAttribute("className","hidden");
			link.setAttribute("className","geklickt");
			otherlink.setAttribute("className","");
			anotherlink.setAttribute("className","");
		}
	}

	/*
	 * Shows or hides the subtree ul and writes the correct char into the link a.
	 *
	 * @param ul the subtree to show or to hide
	 * @param a the clicked link
	 */
	function expand(ul, a){
		var list = document.getElementById(ul);
		var linkImg = document.getElementById(a).firstChild;
		if(linkImg.alt=="+"){
			list.style.display = "block";
			linkImg.src = "minus.png";
			linkImg.alt = "-";
		}else{
			list.style.display = "none";
			linkImg.src = "plus.png";
			linkImg.alt = "+";
		}
	}

	/*
	 * If shouldExpand is true, all VertexClasses or EdgeClasses or packages are shown
	 * If shouldExpand is false, all Classes are hidden.
	 * If the VertexClasses are shown, only the VertexClasses are influenced.
	 * If the EdgeClasses are shown, only the EdgeClasses are influenced.
	 * If the packages are shown, only the packages are influenced.
	 *
	 * @param shouldExpand
	 */
	function expandOrCollapseTree(shouldExpand){
		var rootUl=document.getElementById("aVertex");
		if(document.getElementById("aVertex").getAttribute(rootUl.hasAttribute?"class":"className")=="geklickt"){
			rootUl = document.getElementById("ulRootVertex");
		}else if(document.getElementById("aEdge").getAttribute(rootUl.hasAttribute?"class":"className")=="geklickt"){
			rootUl = document.getElementById("ulRootEdge");
		}else{
			rootUl = document.getElementById("ulRootPackage");
		}
		var allAs = rootUl.getElementsByTagName("a");
		var allUls = rootUl.getElementsByTagName("ul");
		// set all + to - and all - to +
		if(allAs!=null){
			for(var i=0; i<allAs.length; i++){
				allAs[i].firstChild.src = shouldExpand?"minus.png":"plus.png";
				allAs[i].firstChild.alt = shouldExpand?"-":"+";
			}
		}
		// hide/show all subtrees
		if(allUls!=null){
			for(var i=0; i<allUls.length; i++){
				allUls[i].style.display = shouldExpand?"block":"none";
			}
		}
	}

	/*
	 * Sets all checkboxes below ul to the state of changedCheckbox.
	 *
	 * @param changedCheckbox the changed checkbox
	 * @param ul the sublist
	 */
	function  deSelectSubtypes(changedCheckbox, ul){
		if(document.getElementById("checkSelectAll").checked){
			var parentUl = document.getElementById(ul);
			var checkbox = document.getElementById(changedCheckbox);
			if(parentUl!=null){
				var subCheckboxes = parentUl.getElementsByTagName("input");
				if(subCheckboxes!=null){
					// set all checkboxes in ul to the same state as changedCheckbox
					for(var i=0;i<subCheckboxes.length;i++){
						subCheckboxes[i].checked = checkbox.checked;
						deSelect(subCheckboxes[i].id.substr(5), subCheckboxes[i].id);
					}
				}
			}
		}
	}

	/*
	 * Sets all checkboxes wich are in an li wich starts with li+baseName2 
	 * to the state of caller.checked.
	 *
	 * @param baseName2 the uniqueName of the represented Class
	 * @param the caller of this method
	 */
	function deSelect(baseName2, caller){
		var checked = document.getElementById(caller).checked;
		var baseName;
		if(baseName2.lastIndexOf(":")>=0){
			baseName = baseName2.substring(0,baseName2.lastIndexOf(":"));
		}else{
			baseName = baseName2;
		}
		// deSelect the orignial element and its children
		document.getElementById('input'+baseName).checked = checked;
		deSelectSubtypes('input' + baseName,'ul' + baseName);
		// deSelect copies of this element
		deSelectMulti(baseName, checked);
	}

	/*
	 * Sets all checkboxes wich are in an li wich starts with li+baseName 
	 * to the state setChecked.
	 *
	 * @param baseName the baseName of the lis, inputs and uls
	 * @param setChecked the value to which the checkBoxes are set
	 */
	function deSelectMulti(baseName, setChecked){
		var counter = 0;
		while(document.getElementById('li'+baseName+':'+counter)!=null){
			document.getElementById('input'+baseName+':'+counter).checked = setChecked;
			deSelectSubtypes('input'+baseName+':'+counter,'ul'+baseName+':'+counter);
			counter++;
		}
	}

	/*
	 * Selects or deselects all Classes which match the regular expression of inputRegEx
	 *
	 * @param select if true the matches are selected. Otherwise they are deselected.
	 */
	function matchRegEx(select){
		var regString = document.getElementById('inputRegEx').value;
		var div=document.getElementById("aVertex");
		if(document.getElementById("aVertex").getAttribute(div.hasAttribute?"class":"className")=="geklickt"){
			div = document.getElementById("ulRootVertex");
		}else if(document.getElementById("aEdge").getAttribute(div.hasAttribute?"class":"className")=="geklickt"){
			div = document.getElementById("ulRootEdge");
		}else{
			div = document.getElementById("ulRootPackage");
		}
		// Select all checkboxes
		var classes = div.getElementsByTagName("input");
		for(var i=0;i<classes.length;i++){
			var value=classes[i].value;
			if(new RegExp(regString,"gi").test(value)){
				// the regex matches
				classes[i].checked = select;
			}
		}
		submitDeselectedTypes();
	}

	/*
	 * Inserts li into ul. It is inserted at the lexicografically correct position.
	 * The positions is found via a binary search. The bounds have to be checked
	 * as well. "a" is put behind the last occurence of "a". 0<=left<=right<ul.chiledNodes.length
	 *
	 * @param li the li to be inserted
	 * @param liUniqueName the uniqueName of the class which li represents
	 * @param ul the list in which li has to be inserted
	 * @param left the lower bound of the searched interval
	 * @param right the upper bound of the searched interval
	 */
	function insertSorted(li, liUniqueName, ul, left, right){
		if(ul.childNodes == null || (ul.childNodes != null && ul.childNodes.length == 0)){
			// there are no lis in the ul
			ul.appendChild(li);
		}else if(left > right){
			// this case should never be reached
			alert("unexpected error");
		}else{
			if(left == right){
				if(compareStrings(liUniqueName,extractSimpleName(ul,left))<0){
					// put li before ul.childNodes[left]
					ul.insertBefore(li, ul.childNodes[left]);
				}else{
					// put li after ul.childNodes[left]
					if(left == ul.childNodes.length-1){
						// add li to the end
						ul.appendChild(li);
					}else{
						ul.insertBefore(li, ul.childNodes[left+1]);
					}
				}
			}else if(left == right-1){
				// check left
				if(compareStrings(liUniqueName,extractSimpleName(ul,left))<0){
					// put li before ul.childNodes[left]
					ul.insertBefore(li, ul.childNodes[left]);
				}else{
					// check right
					insertSorted(li, liUniqueName, ul, right, right);
				}
			}else{
				// checkMiddle
				var current = Math.floor((left+right)/2);
				if(compareStrings(liUniqueName,extractSimpleName(ul,current))<0){
					// li has to be put on the left part
					insertSorted(li, liUniqueName, ul, left, current-1);
				}else{
					// li has to be put on the right part
					insertSorted(li, liUniqueName, ul, current+1, right);
				}	
			}
		}
	}
	
	/*
	 * Extracts the simleName of an li with the index of ul.
	 *
	 * @param ul the parent ul
	 * @param index the index of the current entry of the ul
	 */
	function extractSimpleName(ul,index){
		var element = ul.childNodes[index].childNodes[2];
		if(element.firstChild.nodeName=="I"){
			element = element.firstChild;
		}
		return element.innerHTML;
	}

	/*
	 * Inserts option into the optiongroup "OptgroupServersideGraph". It is inserted at the 
	 * lexicografically correct position.
	 * The positions is found via a binary search. The bounds have to be checked
	 * as well. "a" is put behind the last occurence of "a". 0<=left<=right<ul.chiledNodes.length
	 *
	 * @param option the option to be inserted
	 * @param left the lower bound of the searched interval
	 * @param right the upper bound of the searched interval
	 */
	function insertSortedIntoOption(option, left, right){
		var optgroup = document.getElementById("OptgroupServersideGraph");
		if(optgroup.childNodes == null || (optgroup.childNodes != null && optgroup.childNodes.length == 1)){
			// there are no options in the optiongroup
			optgroup.appendChild(option);
		}else if(left > right){
			// this case should never be reached
			alert("unexpected error");
		}else{
			if(left == right){
				if(compareStrings(option.value,optgroup.childNodes[left].value)<0){
					// put option before optgroup.childNodes[left]
					optgroup.insertBefore(option, optgroup.childNodes[left]);
				}else{
					// put option after optgroup.childNodes[left]
					if(left == optgroup.childNodes.length-1){
						// add option to the end
						optgroup.appendChild(option);
					}else{
						optgroup.insertBefore(option, optgroup.childNodes[left+1]);
					}
				}
			}else if(left == right-1){
				// check left
				if(compareStrings(option.value,optgroup.childNodes[left].value)<0){
					// put option before optgroup.childNodes[left]
					optgroup.insertBefore(option, optgroup.childNodes[left]);
				}else{
					// check right
					insertSortedIntoOption(option, right, right);
				}
			}else{
				// checkMiddle
				var current = Math.floor((left+right)/2);
				if(compareStrings(option.value,optgroup.childNodes[current].value)<0){
					// option has to be put on the left part
					insertSortedIntoOption(option, left, current-1);
				}else{
					// option has to be put on the right part
					insertSortedIntoOption(option, current+1, right);
				}	
			}
		}
	}

	/*
	 * Compares strings lexicografically. It works case insensitive.
	 * 
	 * @param string1
	 * @param string2
	 * @return <0 iff string1 is before string2
	 *          0 iff string1 == string2
	 *         >0 iff string1 is after string2
	 */
	function compareStrings(string1, string2){
		var s1 = string1.toLowerCase();
		var s2 = string2.toLowerCase();
		var i = 0;
		while(true){
			if(!s1.charCodeAt(i) && !s2.charCodeAt(i)){
				// all chars and the length are equal
				return 0;
			}else if(!s1.charCodeAt(i)){
				// string1 is shorter than string2 and string1 is a prefix of string2
				return -1;
			}else if(!s2.charCodeAt(i)){
				// string2 is shorter than string1 and string2 is a prefix of string1
				return 1;
			}else if(s1.charCodeAt(i)!=s2.charCodeAt(i)){
				// the string with the smaller char
				return s1.charCodeAt(i)-s2.charCodeAt(i);
			}else{
				i++;
			}
		}
	}

	/*
	 * Sets selectedGraphIndex to the index of optionValue in the "OptgroupServersideGraph".
	 *
	 * @param optionValue the option.value of the seeked graph
	 */
	function findPositionOf(optionValue){
		var optgroup = document.getElementById("OptgroupServersideGraph");
		var options = optgroup.childNodes;
		for(var i=0; i<options.length; i++){
			if(options[i].value == optionValue){
				selectedGraphIndex = i-1;
				break;
			}
		}
	}

	/*
	 * Disables the error message. And displays the old div.
	 * Disables divFileupload and divURI.
	 * Resets the select to the selected index. 
	 */
	function clearDisplay(){
		document.getElementById('divError').style.display = "none";
		document.getElementById('divNonError').style.display = "block";
		document.getElementById("divFileUpload").style.display = "none";
		document.getElementById("divURI").style.display = "none";
		document.getElementById('divFilterWindow').style.display = "block";
		cancelGReQL();
		document.getElementById("selectGraph").selectedIndex = selectedGraphIndex;
	}

	/*
	 * Checks if an URI was typed in. If not
	 * a message shows, that a URI must be typed in. 
	 */
	function sendURI(){
		var uriElement = document.getElementById("submitURI");
		if(uriElement.value!=null && uriElement.value!=""){
			var shouldOverwrite = false;
			if(fileAlreadyExists(uriElement.value)){
				shouldOverwrite = confirm("This file already exists. Do you want to overwrite it?");
			}
			document.location = encodeURI("loadGraphFromURI?overwrite="+shouldOverwrite+"&path="+uriElement.value);
			return true;
		}else{
			var error = document.getElementById("errorURI");
			error.innerHTML = "This field must not be empty!";
			return false;
		}
	}

	/*
	 * Checks if input.type="file" isn't empty.
	 */
	function checkSubmit(){
		var input = document.getElementById("inputFileGraph");
		var ret = input.value!="" || input.value!=null;
		var shouldOverwrite = false;
		if(fileAlreadyExists(input.value)){
			shouldOverwrite = confirm("This file already exists. Do you want to overwrite it?");
		}
		document.getElementById("formFileUpload").action = "fileUpload?overwrite="+shouldOverwrite+"&path="+input.value;
		if(!ret){
			var error = document.getElementById("errorFileUpload");
			error.innerHTML = "Choose a file!";
		}
		return ret;
	}

	/*
	 * Checks if the file already exists. If it exists the user is asked,
	 * if he wants to overwrite it.
	 *
	 * @param the filename
	 */
	function fileAlreadyExists(file){
		var optGroup = document.getElementById("OptgroupServersideGraph");
		if(optGroup){
			// get filename
			var fileName = file.substr(Math.max(file.lastIndexOf("/"),file.lastIndexOf("\\"))+1);
			// There exists files on the server
			for(var i=1;i<optGroup.childNodes.length;i++){
				if(optGroup.childNodes[i].innerHTML==fileName){
					return true;
				}
			}
		}
		return false;
	}

	/*
	 * Shows the possibility to upload a graph or to specify the uri.
	 * If a graph is selected, this one is shown.
	 *
	 * @param div the id of the div which should be shown.
	 */
	function showUpload(div){
		clearDisplay();
		if(div == "file_upload"){
			document.getElementById('divNonError').style.display = "none";
			document.getElementById('divFilterWindow').style.display = "none";
			document.getElementById("divFileUpload").style.display = "block";
		}else if(div == "uri"){
			document.getElementById('divFilterWindow').style.display = "none";
			document.getElementById('divNonError').style.display = "none";
			document.getElementById("divURI").style.display = "block";
		}else{
			document.location = "loadGraphFromServer?path="+div;
		}
	}

	/*
	 * Switches the tables of edges and vertices.
	 */
	function switchTable(){
		var divTextVertex = document.getElementById("divTextVertex");
		var divTextEdge = document.getElementById("divTextEdge");
		var aShowVertices = document.getElementById("aShowVertices");
		var aShowEdges = document.getElementById("aShowEdges");
		if(divTextVertex.hasAttribute){
			// code for Firefox, Safari                               
			if(aShowVertices.getAttribute("class")=="geklickt"){
				// show edges
				divTextEdge.style.display = "block";
				divTextVertex.style.display = "none";
				aShowVertices.setAttribute("class","");
				aShowEdges.setAttribute("class","geklickt");
				document.getElementById("h3HowManyEdges").style.display = "block";
				document.getElementById("h3HowManyVertices").style.display = "none";
			}else{
				// show vertices
				divTextEdge.style.display = "none";
				divTextVertex.style.display = "block";
				aShowVertices.setAttribute("class","geklickt");
				aShowEdges.setAttribute("class","");
				document.getElementById("h3HowManyVertices").style.display = "block";
				document.getElementById("h3HowManyEdges").style.display = "none";
			}
		}else{
			// code for Internet Explorer 7
			if(aShowVertices.getAttribute("className")=="geklickt"){
				// show edges
				divTextEdge.style.display = "block";
				divTextVertex.style.display = "none";
				aShowVertices.setAttribute("className","");
				aShowEdges.setAttribute("className","geklickt");
				document.getElementById("h3HowManyEdges").style.display = "block";
				document.getElementById("h3HowManyVertices").style.display = "none";
			}else{
				// show vertices
				divTextEdge.style.display = "none";
				divTextVertex.style.display = "block";
				aShowVertices.setAttribute("className","geklickt");
				aShowEdges.setAttribute("className","");
				document.getElementById("h3HowManyVertices").style.display = "block";
				document.getElementById("h3HowManyEdges").style.display = "none";
			}
		}
	}

	/*
	 * Informs the server of the closed session.
	 */
	function closeSession(){
		sendPostRequest("closeSession", null, false);
	}

	/*
	 * Sends an request, to check if server loaded the graph completly.
	 */
	function checkLoad(){
		sendPostRequest("checkLoading", null, false);
	}

	/*
	 * Submits the deselected types.
	 * Transmitted data:
	 * is tableView shown?\n
	 * #deselected vertexTypes with # after each\n
	 * #deselected edgeTypes with # after each
	 * show attributes\n
	 * elements per page\n
	 * path length
	 */
	function submitDeselectedTypes(){
		clearDisplay();
		var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
		// find deselected vertexClasses
		var deselectedVertexTypes = "";
		var classes = document.getElementById("ulRootVertex").getElementsByTagName("input");
		for(var i=0; i<classes.length; i++){
			if(!classes[i].checked && classes[i].id == classes[i].name){
				// types which occure several times are added only once
				deselectedVertexTypes += classes[i].value + "#";
			}
		}
		// find deselected edgeClasses
		var deselectedEdgeTypes = "";
		var classes = document.getElementById("ulRootEdge").getElementsByTagName("input");
		for(var i=0; i<classes.length; i++){
			if(!classes[i].checked && classes[i].id == classes[i].name){
				deselectedEdgeTypes += classes[i].value + "#";
			}
		}
		// call server
		sendPostRequest("refreshViewAfterTypeSubmit", isTableViewShown + "\n#" + deselectedVertexTypes + "\n#" + deselectedEdgeTypes + "\n" + isShowAttributesSet()+ "\n" + getSelectedNumbersPerPage() + "\n" + getPathLength() + "\n" + currentVertex + "\n" + currentEdge + "\n" + extractCurrentElement(), true);
	}

	/*
	 * Returns the value of the pathlength to be shown.
	 */
	function getPathLength(){
		return document.getElementById("textPathLength").value;
	}

	/*
	 * Returns the value of the checkbox "show attributes".
	 */
	function isShowAttributesSet(){
		return document.getElementById("checkShowAttributes").checked;
	}

	/*
	 * Returns true, iff the vertices in the table view are shown.
	 */
	function areVerticesShown(){
		return document.getElementById("divTextGraph").style.display != "none" 
			&& document.getElementById("divTextVertex").style.display != "none";
	}

	/*
	 * Returns the selected value of how many elements should be
	 * displayed on one page. If inputAll is selected -1 is returned.
	 */
	function getSelectedNumbersPerPage(){
		var select = document.getElementById("selectElementsPerPage");
		return select.options[select.selectedIndex].value;
	}

	/*
	 * Shows or hides the attributes.
	 * In the table view, the number of elements per page is changed-
	 */
	function refreshView(){
		var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
		if(isTableViewShown){
			sendPostRequest("refreshTable", getSelectedNumbersPerPage() + "\n" + isShowAttributesSet() + "\n" + currentEdge + "\n" + currentVertex, true);
		}else{
			sendPostRequest("refresh2D", getPathLength() + "\n" + isShowAttributesSet() + "\n" + extractCurrentElement() , true);
		}
	}
	
	/*
	 * Extracts the index of the currently selected element of the 
	 * breadcrumb bar.
	 *
	 * @return the navigationHistory index of the currently selected element
	 */
	function extractCurrentElement(){
		// find displayed bar
		var breadcrumbBars = document.getElementById("divBreadcrumbBar").childNodes;
		var shownBar;
		for(var i = 0; i<breadcrumbBars.length; i++){
			if(breadcrumbBars[i].style.display == "inline"){
				shownBar = breadcrumbBars[i];
				break;
			}
		}
		// find selected element
		var elements = shownBar.getElementsByTagName("a");
		var currentElement;
		for(var i = elements.length-1;i>=0;i--){
			if(elements[i].style.color=="white"){
				currentElement = elements[i].href;
				break;
			}
		}
		// extract index of navigationHistory
		return currentElement.split("(")[1].split(",")[0];
	}

	/*
	 * Shows an element of the breadcrumb bar.
	 *
	 * @param index the index of the element in the navigation history.
	 * @param elementId the id of the element to go back to
	 */
	function goBackToElement(index, elementId){
		var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
		if(!document.getElementById(elementId) || !isTableViewShown){
			sendPostRequest("goBackToElement", index + "\n" + isTableViewShown + "\n" + isShowAttributesSet()+ "\n" + getSelectedNumbersPerPage() + "\n" + getPathLength(), true);
		}else if(document.getElementById(elementId)){
			sendPostRequest("refreshBreadcrumbBar",index + "\n" + isTableViewShown + "\n" + false,true);
			document.location.href = "#" + elementId;
			if(isTableViewShown){
				changeBackgroundColor(elementId);
			}
		}
	} 
	
	/*
	 * Hides hide and shows show.
	 *
	 * @param hide
	 * @param show
	 */
	function switchBreadcrumbPage(hide,show){
		document.getElementById(hide).style.display = "none";
		document.getElementById(show).style.display = "inline";
	}

	/*
	 * Shows the element with the elementId.
	 *
	 * @param the id of the element which should be shown
	 */
	function showElement(elementId){
		var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
		if(isTableViewShown&&((areVerticesShown() && elementId.charAt(0)=='e')||
				(!areVerticesShown() && elementId.charAt(0)=='v'))){
			switchTable();
		}
		if(isTableViewShown){
			if(!document.getElementById(elementId)){
					sendPostRequest("showElementsAsTable", getSelectedNumbersPerPage() + "\n" + isShowAttributesSet() + "\n" + elementId, true);
			}else{
				sendPostRequest("refreshBreadcrumbBar",elementId+"\n"+isTableViewShown+"\n"+true,true);
				document.location.href = "#" + elementId;
				if(elementId.charAt(0)=='v'){
					currentVertex = elementId;
				}else{
					currentEdge = elementId;
				}
				changeBackgroundColor(elementId);
			}
		}else{
			sendPostRequest("showElementsAs2D", getPathLength() + "\n" + isShowAttributesSet() + "\n" + elementId, true);
		}
	}

	/*
	 * Shows the next page of the incidence list.
	 *
	 * @param pageNumber the number of the page which should be shown next.
	 * 			The first page has the number 1.
	 * @param the id of the td which contains the incidence list
	 */
	function goToIncidentPage(pageNumber,currentTdId){
		sendPostRequest("showIncidencesPage", pageNumber + "\n" + currentTdId, true);
	}

	/*
	 * Shows the page with the number pageNumber of the table.
	 *
	 * @param pageNumber the number of the page which should be shown next.
	 * 			The first page has the number 1.
	 * @param sendDirect shows the page of the table without a check if it is already shown
	 */
	function goToPage(pageNumber, sendDirect){
		if((areVerticesShown() && pageNumber != document.getElementById("inputPageNumberVertex").value)||
				(!areVerticesShown() && pageNumber != document.getElementById("inputPageNumberEdge").value)||sendDirect){
			sendPostRequest("showPageInTable", getSelectedNumbersPerPage() + "\n" + isShowAttributesSet() + "\n" + pageNumber + "\n" + areVerticesShown(), true);
		}
	}
	
	/*
	 * Changes the background color of "tr"+currentElement to white and of 
	 * "tr"+next to red.
	 *
	 * @param next the id of the next element
	 */
	function changeBackgroundColor(next){
		if(document.getElementById("tr"+currentElement)){
			document.getElementById("tr"+currentElement).style.backgroundColor = "white";
		}
		if(document.getElementById("tr"+next)){
			document.getElementById("tr"+next).style.backgroundColor = "#FFC080";
		}
		currentElement = next;
	}

	/*
	 * Selects the element on which was clicked.
	 *
	 * @param elementId the id of the element on which was clicked
	 */
	function clickOnElement(elementId){
		sendPostRequest("refreshBreadcrumbBar",elementId+"\n"+true+"\n"+true,true);
		document.location.href = "#" + elementId;
		if(elementId.charAt(0)=='v'){
			currentVertex = elementId;
		}else{
			currentEdge = elementId;
		}
		changeBackgroundColor(elementId);
	}

	/*
	 * Replaces all chars which are not alphanumeric with ,.
	 * Leading and trailing , are removed and ,,+ is replaced by ,.
	 * The value of element is replaces by this new content.
	 * If the content has an element which does not fullfill
	 * v[1-9][0-9]* or e[1-9][0-9]* an alert is thrown. Otherwise
	 * it is checked, that the content is not empty. Then the request
	 * is send.
	 *
	 * @param element the current input element
	 */
	function selectElements(element){
		// transform the content to the elements separated by ,
		var content = element.value.toLowerCase().replace(/\s/g,",");
		content = content.replace(/\W/g,",");
		content = content.replace(/^,+/g,"");
		content = content.replace(/,+$/g,"");
		content = content.replace(/,,+/g,",");
		element.value = content;
		// check if the content has the form v[1-9][0-9]* or e[1-9][0-9]*
		if(content.match(/[a-d]/g)||content.match(/[f-u]/g)||content.match(/[w-z]/g)
			||content.match(/^\d/g)||content.match(/,\d/g)||content.match(/v,/g)
			||content.match(/e,/g)||content.match(/v$/g)||content.match(/e$/g)
			||content.match(/e0/g)||content.match(/v0/g)){
			alert("The elements must have the form v[1-9][0-9]* or e[1-9][0-9]*");
		}else if(content.length>0){
			var isTableViewShown = document.getElementById("divTextGraph").style.display != "none";
			sendPostRequest("showTypedElements", isTableViewShown + "\n" + isShowAttributesSet()+ "\n" + getSelectedNumbersPerPage() + "\n" + getPathLength() + "\n" + content, true);
		}
	}
	
	/* ]]> */
</script>
</head>
<body onload="init();" onunload="closeSession();">

<div id="top">
	<img src="jgralab-logo.png" alt="JGraLab" class="jGraLab" />
	<select id="selectGraph" name="selectGraph" class="option" size="1" onchange="showUpload(this.options[this.selectedIndex].value);">
		<optgroup id="OptgroupServersideGraph" label="choose a graph from the server">

		</optgroup>
		<optgroup label="choose a new graph via">
			<option value="file_upload">File upload</option>
			<option value="uri">Uniform Resource Identifier</option>
		</optgroup>
	</select>
	<input class="option" type="checkbox" value="checkShowAttributes" id="checkShowAttributes" onclick="refreshView();" />
	<p id="pAttributes" class="option">Show attributes</p>
	&nbsp;
	<div class="option" id="divTextVis">
		<p>
			Show 
			<select id="selectElementsPerPage" name="selectElementsPerPage" size="1" onchange="refreshView();">
				<option value="10">10</option>
				<option value="20">20</option>
				<option value="50">50</option>
				<option value="100">100</option>
				<option value="200">200</option>
				<option value="500">500</option>
				<option value="1000">1000</option>
			</select>
			 elements.
		</p>
	</div>
	<div class="option" id="div2DVis" style="display:none;">
		<p>
			Size of environment: 
			<input type="text" name="textPathLength" id="textPathLength" value="1" onchange="if(this.value&lt;1){this.value='1';}refreshView();" />
		</p>
	</div>
	<a id="aChangeView" class="option" href="javascript:changeView();">&nbsp;Show graphical view&nbsp;</a>
	&nbsp;
	<div id="rightOption" class="option">
		<input type="text" name="textElem" id="textElem" value="v1" size="6" onchange="selectElements(this);"  onkeyup="if((event.which?event.which:event.keyCode)==13){selectElements(this);}"/>
		<a id="aGReQL" href="javascript:callGReQLWindow('aGReQL');">&nbsp;Select by GReQL&nbsp;</a>
	</div>
</div>

<div id="divLoadBar">
	<h1>Graph is loading</h1>
	<h1>Please wait.</h1>
	<div id="loadBar">
		<div id="loadBarBackground">
			<div id="loadBarForeground">
				<span id="loadBarNumber">0 %</span>
			</div>
		</div>
	</div>
	<h1 id="loadError" style="color: red;"></h1>
</div>

<div id="divFileUpload" style="display: none;">
	<h3>Upload a graph:</h3>
	<br />
	<form id="formFileUpload" action="" method="post" enctype="multipart/form-data" onsubmit="return checkSubmit();">
		<p>
			<input id="inputFileGraph" name="inputFileGraph" size="80" type="file" /><br />
			<b id="errorFileUpload" style="color: red;"></b><br />
			<input type="submit" /><br />
			<br />
			<a href="javascript:clearDisplay();">Back</a>
		</p>
	</form>
</div>

<div id="divURI" style="display: none;">
	<h3>Load from URL:</h3>
	<br />
	<p>
		<input id="submitURI" type="text" size="98" /><br />
		<b id="errorURI" style="color: red;"></b><br />
		<input type="button" value=" Submit " onclick="sendURI();" /><br />
		<br />
		<a href="javascript:clearDisplay();">Back</a>
	</p>
</div>

<div id="divFilterWindow" style="display:none;">
	<h3 id="h3HowManyVertices"></h3>
	<h3 id="h3HowManyEdges" style="display:none;"></h3>
	<h3 id="h3HowManyElements"  style="display:none;"></h3>
	<div style="margin: 0; padding: 0;">
		<a id="aVertex" href="javascript:changeFilterView('divVertexClass','aVertex');" class="geklickt">&nbsp;Vertex classes&nbsp;</a>
		<a id="aEdge" href="javascript:changeFilterView('divEdgeClass','aEdge');">&nbsp;Edge classes&nbsp;</a>
		<a id="aPackage" href="javascript:changeFilterView('divPackage','aPackage');">&nbsp;Packages&nbsp;</a>
		<div id="divVertexClass" class="visible">
		</div>
		<div id="divEdgeClass" class="hidden">
		</div>
		<div id="divPackage" class="hidden">
		</div>
		<input type="checkbox" checked="checked" id="checkSelectAll" name="checkSelectAll" value="checkSelectAll" /> De/Select subtypes<br />
		<a href="javascript:expandOrCollapseTree(true);">&nbsp;Expand all&nbsp;</a>&nbsp;
		<a href="javascript:expandOrCollapseTree(false);">&nbsp;Collapse all&nbsp;</a>
		<br />
		<br />
		<hr />
		<input type="text" size="40" title="A JavaScript regular expression" 
			id="inputRegEx" name="inputRegEx" value="&lt;a case insensitive regular expression&gt;"
			onclick="var x=document.getElementById('inputRegEx');if(x.value.charAt(0)=='&lt;'){x.value='';}" /><br />
		<a href="javascript:matchRegEx(true);">&nbsp;Select&nbsp;</a>&nbsp;
		<a href="javascript:matchRegEx(false);">&nbsp;Deselect&nbsp;</a>
		<br />
		<br />
		<br />
	</div>
</div>

<div id="divRight" style="display: none;">
	<div id="divError" style="display: none; text-align: center; z-index: 10; min-width: 57em;">
		<br />
		<h2 id="h2ErrorMessage" style="color: red;"></h2>
		<br />
		<a href="javascript:clearDisplay();">Back</a>
	</div>

	<div id="divNonError">
		<div id="divGReQLWindow">
			<h2>GReQL query:</h2>
			<div>
				<textarea id="textareaGreqlQuery" name="textareaGreqlQuery" cols="50" rows="20"></textarea>
			</div>
			<h3 id="h3GReQLError" style="color: red;"></h3>
			<a href="javascript:submitGReQL();">&nbsp;Submit&nbsp;</a>&nbsp;
			<a href="javascript:cancelGReQL();">&nbsp;Cancel&nbsp;</a>
		</div>

		<div id="divGraph">
			<div id="divBreadcrumbBar">
				<p id="pBreadcrumbContent0">
				</p>
			</div>

			<div id="divTextGraph" style="display: block;">
				<div id="divHeadline" class="divHeadline" style="margin-bottom: 8px;">
					<a id="aShowVertices" class="geklickt" 
						style="padding-left:5em;padding-right:5em;" 
						href="javascript:switchTable();"> Vertices </a>
					<a id="aShowEdges"  
						style="padding-left:5em;padding-right:5em;" 
						href="javascript:switchTable();"> Edges </a>
				</div>
				<hr id="hrHeadline" />
				<div id="divTextVertex">
				</div>
				<div id="divTextEdge" style="display: none;">
				</div>
			</div>

			<div id="div2DGraph" style="display: none;">
			</div>
		</div>
	</div>
</div>
</body>
</html>